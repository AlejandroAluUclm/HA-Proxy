global
    log stdout format raw local0
    lua-load /etc/haproxy/notify.lua


defaults
    log     global
    mode    http
    timeout connect 5000ms
    timeout client  50000ms
    timeout server  50000ms

frontend http-in
    bind *:80
    mode http
    default_backend servers
    http-request lua.notify_request

backend servers
    balance roundrobin
    server web1 server1:80 check
    server web2 server2:80 check
    server web3 server3:80 check
